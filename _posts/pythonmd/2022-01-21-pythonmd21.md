---
layout: single
title: "[Python] 21. 정보은닉과 __dict__"
folder: "pythonmd"
categories:
    - pythonmd
tag:
    - [python, '__', __dict__]

author_profile: true    #작성자 프로필 출력 여부

toc: true   #Table Of Contents 목차 
toc_sticky: true

sidebar:
  nav: "docs"
---

본 포스팅은 "윤성우의 열혈 파이썬 중급편" 책 내용을 기반으로 작성되었습니다.
잘못된 내용이 있을 경우 지적해 주시면 감사드리겠습니다.

## 21-1. 속성 감추기
```python
class Person:
  def __init__(self, n, a):
    self.__name = n
    self.__age = a
  def add_age(self, a):
    if(a < 0):
      print('나이 정보 오류')
    else:
      self.__age += a
  
  def __str__(self):
    return '{0}: {1}'.format(self.__name, self.__age)

def main():
  p = Person('James', 22)
  p.add_age(1)
  # p.__age -= 1 # 이 문장 실행하면 오류 발생된다!
  print(p)

main()
```
    (결과) James: 23

위 예제의 `__(변수명)`에 주목하자! 평소 보는 변수명과는 많이 다르다.<br/>
- 객체 내 변수(속성) 이름 앞에 언더바(`__`)를 붙이면 이 변수에 직접 접근할 수 없다!

왜 이런게 필요할까? <br/>
만약 실수로 `p.__age`에 접근해서 `+=` 연산을 하려 했는데 `-=`연산을 했다고 하자. 이런 사소한 문법적 오류를 발견하기는 쉽지 않다. 그래서 객체 외부에서 객체 내 변수에 직접 접근하지 못하도록 막을 수 있게 만들었다. 그리고 메소드를 이용하여 `+=` 연산에 해당하는 기능을 만들고 여기에 접근하도록 구현한 것이다. 그러면 덜 헷갈릴 것이니까!

참고로 파이썬에는 `_(변수명)`, 즉 언더바를 하나만 사용하면 실제 객체 내 해당 변수에 직접 접근이 가능하지만, 해당 변수에 직접 접근하지 말아야 한다! 라는 암묵적인 규칙이 있다고 한다.

## 21-2. __dict__
```python
class Person:
  def __init__(self, n, a):
    self._name = n
    self._age = a
  
def main():
  p = Person('James', 22)
  print(p.__dict__)
  p.len = 178
  p.adr = 'Korea'
  print(p.__dict__)

main()
```
    (결과) {'_name': 'James', '_age': 22}
           {'_name': 'James', '_age': 22, 'len': 178, 'adr': 'Korea'}

보다시피, 객채는 `__dict__`라는 스페셜 메소드를 갖고 있으며, 여기에는 해당 객체의 변수 정보가 담긴다.

```python
class Simple:
  def __init__(self, n, s):
    self._n = n
    self._s = s
  def __str__(self):
    return '{0}: {1}'.format(self._n, self._s)

def main():
  sp = Simple(10, 'my')
  print(sp)
  sp.__dict__['_n'] += 10
  sp.__dict__['_s'] = 'your'
  print(sp)

main()
```
    (결과) 10: my
           20: your

21-1에서 `_(변수명)`은 직접 접근이 안된다고 배웠다. 하지만 `__dict__`에 접근하면, 객체 내 `_(변수명)` 형태의 변수 값을 수정할 수 있게 된다!<br/>
즉, 객체 내 변수의 값은 `__dict__`를 통해서 관리가 되고 있는 것이다!

```python
class Person:
  def __init__(self, n, a):
    self.__name = n
    self.__age = a

def main():
  p = Person('James', 22)
  print(p.__dict__)

main()
```
    (결과) {'_Person__name': 'James', '_Person__age': 22}
 
객체 내 변수 이름을 `__(변수명)`, 즉 언더바를 2개 붙여서 변수를 생성하면 `__dict__`에는 다음과 같은 패턴으로 키가 생성된다.
- `__AttrName` → `_ClassName__AttrName`

이제 왜 언더바 2개를 붙인 객체 내 변수에는 접근이 안되는지 이해가 됐능가?!?
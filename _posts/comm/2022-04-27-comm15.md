---
layout: single
title: "[네트워크 초급] 15. 데이터가 케이블에서 충돌하지 않는 구조"
folder: "comm"
categories:
    - comm
tag:
    - [Network, 전이중 통신, 반이중 통신, 충돌 도메인, ARP]

author_profile: true    #작성자 프로필 출력 여부

toc: true   #Table Of Contents 목차 
toc_sticky: true

sidebar:
  nav: "docs"
---

본 포스팅은 "모두의 네트워크" 책 내용을 기반으로 작성되었습니다.
잘못된 내용이 있을 경우 지적해 주시면 감사드리겠습니다.

## 15-1. 전이중 통신과 반이중 통신
- 전이중 통신 방식
  * 데이터의 송수신 동시에 처리
  * 데이터 동시에 전송해도 충돌 발생X
- 반이중 통신 방식
  * 회선 하나로 송신과 수신 번갈아가면서 통신
  * 데이터 동시에 전송시 충돌 발생

만약 그림 15-1 처럼 직접 랜 케이블 여덟개로 컴퓨터 2대를 연결한다면, 4쌍을 사용하므로 **전이중 통신 방식**이 된다.

![그림 15-1. 컴퓨터 간 직접 랜 케이블로 연결한 방식 = 전이중 통신 방식](/assets/images/comm/15-1.png)
{: .align-center}
그림 15-1. 컴퓨터 간 직접 랜 케이블로 연결한 방식 = 전이중 통신 방식

허브 내부에는 송수신이 나누어져 있지 않다. 컴퓨터 2대를 허브로 연결하면 동시에 데이터를 보낼 때 충돌이 난다. 허브를 사용하면 회선 하나를 송신과 수신이 번갈아가면서 사용하는 **반이중 통신 방식**을 사용하게 된다.

![그림 15-2. 허브에 연결 = 반이중 통신 방식](/assets/images/comm/15-2.png)
{: .align-center}
그림 15-2. 허브에 연결 = 반이중 통신 방식

스위치는 충돌이 일어나지 않는 구조이므로 전이중 통신 방식으로 데이터 주고받을 수 있다. 최근에는 네트워크로 스위치를 사용하는 것이 표준이며, 스위치를 사용하는 것이 허브보다 효율이 높다.

![그림 15-3. 스위치에 연결 = 전이중 통신 방식](/assets/images/comm/15-3.png)
{: .align-center}
그림 15-3. 스위치에 연결 = 전이중 통신 방식

## 15-2. 충돌 도메인
- 충돌 도메인: 반이중 통신 방식으로 데이터 전송 시 충돌 발생할 때 그 영향이 미치는 범위

허브는 연결되어 있는 컴퓨터 전체가 하나의 **충돌 도메인**이다.

![그림 15-4. 모든 컴퓨터에 충돌 영향을 미치는 허브](/assets/images/comm/15-4.png)
{: .align-center}
그림 15-4. 모든 컴퓨터에 충돌 영향을 미치는 허브

스위치는 전이중 통신 방식을 사용하므로 충돌이 일어나지 않을 뿐더러, 충돌 도메인의 범위도 좁다.

![그림 15-5. 충돌 도메인이 좁은 스위치](/assets/images/comm/15-5.png)
{: .align-center}
그림 15-5. 충돌 도메인이 좁은 스위치

충돌 도메인의 범위가 넓을 수록 네트워크가 지연되므로 충돌 도메인의 범위를 좁히는 것은 매우 중요하다.

## 15-3. ARP(Address Resolution Protocol)
IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜이다. 이더넷 프레임을 전송하려면 목적지 컴퓨터의 MAC 주소를 지정해야 한다. 출발지 컴퓨터가 목적지 주소를 모를 경우, MAC 주소를 알아내기 위해 네트워크에 브로드캐스트를 한다. 이것을 **ARP 요청** 이라 한다.

이 요청을 받으면 지정된 IP 주소를 갖고 있지 않는 컴퓨터는 응답하지 않고 지정된 IP 주소를 가진 컴퓨터는 MAC 주소를 응답으로 보낸다. 이것을 **ARP 응답** 이라 부른다. 이것으로 출발지 컴퓨터는 MAC 주소를 얻고 이더넷 프레임을 만들 수 있다.

출발지 컴퓨터는 MAC 주소를 얻은 후 MAC 주소와 IP 주소의 매핑 정보를 메모리에 보관한다. 이 정보를 **ARP 테이블** 이라 한다. 이 후 데이터 통신은 자신의 컴퓨터에 보관된 ARP 테이블을 참고하여 전송한다.

만약 IP 주소가 변경되면 해당 MAC 주소도 함께 변경되어 제대로 통신할 수 없다. ARP 테이블은 보존 기간을 ARP 캐시로 지정하고 일정 시간이 지나면 삭제하여 다시 ARP 요청을 한다. 윈도우에서 ARP 캐시를 확인하고 싶다면 ``arp -a`` 명령어를 사용하고, ARP 캐시를 강제로 삭제하려면 ``arp -d`` 명령어를 사용하면 된다.
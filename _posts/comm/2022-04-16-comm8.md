---
layout: single
title: "[네트워크 초급] 8. 캡슐화와 역캡슐화"
folder: "comm"
categories:
    - comm
tag:
    - [Network, 헤더, 트레일러, 캡슐화, 역캡슐화, VPN]

author_profile: true    #작성자 프로필 출력 여부

toc: true   #Table Of Contents 목차 
toc_sticky: true

sidebar:
  nav: "docs"
---

본 포스팅은 "모두의 네트워크" 책 내용을 기반으로 작성되었습니다.
잘못된 내용이 있을 경우 지적해 주시면 감사드리겠습니다.

## 8-1. 캡슐화와 역캡슐화
데이터를 보내려면 데이터 앞 부분에 전송하는데 필요한 정보를 붙여서 다음 계층으로 보내야한다. 즉 '필요한 정보-송신 데이터' 형태로 다음 계층에 보내야한다는 것이다. 이 '필요한 정보'를 **헤더**라고 하며, 헤더는 데이터를 전달받을 상대방에 대한 정보도 포함한다. 이렇게 헤더를 붙여 나가는 것을 **캡슐화**라고 한다. 반면에, 데이터를 받는 쪽에서는 헤더를 하나씩 제거해야하는데, 이것을 **역캡슐화**라고 한다. 

![그림 8-1. 캡슐화와 역캡슐화 흐름의 전체 구성](/assets/images/comm/8-1.png)
{: .align-center}
그림 8-1. 캡슐화와 역캡슐화 흐름의 전체 구성

송신 측 컴퓨터에서 웹 사이트에 접속하려면 그림 8-1의 응용 계층에서 **웹 사이트를 접속하기 위한 요청 데이터**가 만들어진다. 그 다음 해당 데이터가 전송 계층에 전달되는데, 전송 계층에서 **신뢰할 수 있는 통신**이 이루어지도록 응용 계층에서 만들어진 데이터에 헤더를 붙힌다. 그리고 전송 계층에서 만들어진 데이터를 **다른 네트워크와 통신**하기 위해 네트워크 계층에서 헤더를 붙힌다. 마지막으로 네트워크 계층에서 만들어진 데이터에 **물리적인 통신 채널을 연결**하기 위해 데이터 링크 계층에서 헤더와 트레일러를 붙힌다. **트레일러**는 데이터를 전달할 때 데이터의 마지막에 추가하는 정보이다. 이렇게 데이터 링크 계층에서 만들어진 데이터는 최종적으로 **전기 신호**로 변환되어 수신 측에 도착한다. 이렇게 필요한 데이터를 추가해 나가는 것을 캡슐화라고 한다!

수신 측은 각 계층의 헤더를 제거하면서 데이터를 전달한다. 송신 측과는 반대로 데이터 링크 계층부터 순서대로 상위 계층에 전달한다. 이렇게 헤더와 트레일러가 하나씩 제거되면 모든 헤더가 제거된 순수 데이터가 수신 측에 도착하게 된다.

## 8-2. VPN(Virtual Private Network)
VPN은 가상 사설망이다. 가성 통신 터널을 만들어 거점 간 연결해 통신하거나 외부에서 인터넷으로 사내에 접속하는 것을 말한다. VPN은 다음 두 종류로 구성된다.

- 인터넷 VPN: 거점 간 접속과 원격 접속 연결이 많다. 둘 다 일반 인터넷 망을 사용한다. 거점 간 접속은 IPsec이라는 암호 기술 프로토콜을 사용하여 접속한다. 반면 원격 접속 연결은 외부에서 사용하는 컴퓨터와 사내 네트워크를 연결하기 때문에 암호화된 통신로를 만든다.<br/>
- IP-VPN: MPLS라는 기술을 사용하며 통신 사업자 전용 폐쇄망을 사용한다. MPLS는 폐쇄망을 사용하므로 제삼자에 의한 해킹이나 데이터 변조의 위험이 없어 암호화 기능이 필요하지 않다.